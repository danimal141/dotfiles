# 現在のブランチからプルリクエスト作成

gitコミットを解析して現在のブランチのプルリクエスト作成ワークフローを自動化します。

## 使い方

```
/user:create-pr-ja
```

## 例

```
/user:create-pr-ja
以下の情報を提供してください：
1. GitHub Issue URL（任意）: https://github.com/owner/repo/issues/123
2. マージ先ブランチ（デフォルト: main/master）: develop
```

## 動作フロー

1. **現在のブランチ解析**
   - gitを使用して現在のブランチ名を取得
   - 現在のブランチとターゲットブランチ間のコミットを解析
   - `git log target..HEAD`を使用してコミットメッセージを抽出
   - コミットから作業内容を自動生成

2. **GitHub Issue連携**（URLが提供された場合）
   - 提供されたGitHub Issue URLを解析
   - GitHub MCPサーバーを使用してIssueの詳細情報を取得
   - PRとIssueをリンク

3. **プルリクエスト準備**
   - PRタイトルを以下に基づいて生成：
     - ブランチ名パターン（例: feature/xxx → "xxxの機能を追加"）
     - ブランチ名が汎用的な場合は最初のコミットメッセージ
     - Issue URLが提供された場合はIssueタイトル
   - 包括的なPR説明を作成：
     - コミットメッセージから自動生成された概要
     - 関連するIssue情報（提供された場合）
   - ターゲットブランチを決定（提供されたものまたはデフォルト）

4. **プルリクエスト作成**
   - 必要に応じて現在のブランチをリモートにプッシュ
   - GitHub CLI（`gh pr create`）を使用してPRを作成
   - 以下の形式の説明を含める：
     ```markdown
     ## 概要
     [コミットメッセージから自動生成]
     - 機能Xを実装
     - バグYを修正
     - コンポーネントZをリファクタリング

     ## 関連Issue
     https://github.com/owner/repo/issues/123（該当する場合）
     ```
   - ユーザー参照用にPR URLを返す

## 必要な情報

- GitHubリモートを持つGitリポジトリ
- マージするコミットを含む現在のブランチ
- GitHub CLI（`gh`）の設定
- リポジトリへのアクセス権限

## 出力

- 作成されたプルリクエストのURL
- PRとIssueのリンク（該当する場合）
